<!DOCTYPE html>
<html lang="en">
<head>
    <title>QQMI {{ title }}</title>
    <meta charset="UTF-8">
    <style>
    table { width: 100%; }
    td input { width: 100%; box-sizing: border-box; }
    td { padding: 5px; }
    .header td { border: 2px solid black; }
    </style>
</head>
<body>
    <h2>{{ title }}</h2>

    <p><a href="?mode=overview">Back to overview</a></p>

    {{ instructions|safe }}

    {% if action %}
    <form action="{{ action }}" method="POST">
    {% endif %}
    <table border="1">
    <tr class="header">
        {% for column in columns %}
        <td>{{ column }}</td>
        {% endfor %}
    </tr>
    {% for row in rows %}
    <tr>
        {% for ctype, cname, options, cell in row %}
        <td>
            {% if ctype == "url" %}
                {% if cell %}
                <a href="{{ url }}">{{ cell }}</a>
                {% endif %}
            {% elif ctype == "dropdown" %}
            <select name="{{ cname }}">
                {% for optionname, optionvalue in options %}
                <option value="{{ optionname }}"{% if optionname == cell %} selected{% endif %}>{{ optionvalue }}</option>
                {% endfor %}
            </select>
            {% elif ctype == "text" %}
            <input type="text" value="{{ cell }}" name="{{ cname }}">
            {% elif ctype == "date" %}
            <input type="date" value="{{ cell }}" name="{{ cname }}">
            {% else %}
                {% if cell %}
                {{ cell }}
                {% endif %}
            {% endif %}
        </td>
        {% endfor %}
    </tr>
    {% endfor %}
    {% if creation %}
    <tr>
        {% for ctype, cname, column in creation %}
        <td>
            {% if ctype == "dropdown" %}
            <select name="{{ cname }}">
                {% for optionname, optionvalue in column %}
                <option value="{{ optionname }}">{{ optionvalue }}</option>
                {% endfor %}
            </select>
            {% elif ctype == "text" %}
            <input type="text" value="{{ column }}" name="{{ cname }}">
            {% elif ctype == "date" %}
            <input type="date" value="{{ column }}" name="{{ cname }}">
            {% else %}
            {{ column }}
            {% endif %}
        </td>
        {% endfor %}
    </tr>
    {% endif %}
    </table>
    {% if action %}
    <input type="submit" value="UPDATE">
    </form>
    {% endif %}
</body>
</html>

